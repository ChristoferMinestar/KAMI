// 
// Decompiled by Procyon v0.5.36
// 

package me.zeroeightsix.kami.module.modules.exploits;

import java.util.function.Predicate;
import net.minecraft.network.Packet;
import net.minecraft.util.EnumFacing;
import net.minecraft.network.play.client.CPacketPlayerTryUseItemOnBlock;
import me.zeroeightsix.kami.setting.Settings;
import me.zero.alpine.listener.EventHandler;
import me.zeroeightsix.kami.event.events.PacketEvent;
import me.zero.alpine.listener.Listener;
import me.zeroeightsix.kami.setting.Setting;
import me.zeroeightsix.kami.module.Module;

@Info(name = "BuildHeight", category = Category.EXPLOITS)
public class BuildHeight extends Module
{
    private Setting<Integer> height;
    @EventHandler
    private Listener<PacketEvent.Send> packetListener;
    
    public BuildHeight() {
        this.height = this.register(Settings.i("Height", 255));
        CPacketPlayerTryUseItemOnBlock oldPacket;
        this.packetListener = new Listener<PacketEvent.Send>(event -> {
            if (!(!(event.getPacket() instanceof CPacketPlayerTryUseItemOnBlock))) {
                oldPacket = (CPacketPlayerTryUseItemOnBlock)event.getPacket();
                if (oldPacket.func_187023_a().func_177956_o() >= this.height.getValue()) {
                    if (oldPacket.func_187024_b() == EnumFacing.UP) {
                        BuildHeight.mc.field_71439_g.field_71174_a.func_147297_a((Packet)new CPacketPlayerTryUseItemOnBlock(oldPacket.func_187023_a(), EnumFacing.DOWN, oldPacket.func_187022_c(), oldPacket.func_187026_d(), oldPacket.func_187025_e(), oldPacket.func_187020_f()));
                        event.cancel();
                    }
                }
            }
        }, (Predicate<PacketEvent.Send>[])new Predicate[0]);
    }
}
